#############################################################################
# The Falcon Programming language
#
# CMake configuration file for Core falcon
##############################################################################
#
#
# List of available modules: CURL DBI DBUS DYNLIB GD2 GTK PDF SDL
#

##################################################################
# CMake system setup and initialization

cmake_minimum_required(VERSION 2.6.2)
project(Falcon)

list(APPEND CMAKE_MODULE_PATH "${CMAKE_CURRENT_SOURCE_DIR}/cmake/modules" )
include(cmake/system-detect.cmake)
include(cmake/version-info.cmake)
include(cmake/utils.cmake)
include(devtools/falmod.cmake)

##################################################################
# System specific

include(cmake/sys_setup-win32.cmake)
include(cmake/sys_setup-win32.cmake)
include(cmake/test-bigendian.cmake)

##################################################################
# Read Options and determine defaults

include(cmake/options.cmake)

##################################################################
#  Compiler control

include(cmake/compilers.cmake)

##################################################################
# Falcon build environment setup

# Add source include files at those generated by the module
set(Falcon_IN_CORE_SOURCETREE on)

set(Falcon_DIR "${CMAKE_CURRENT_BINARY_DIR}/devtools" )

list(APPEND Falcon_INCLUDE_DIRS
   "${CMAKE_CURRENT_SOURCE_DIR}/include"
   "${CMAKE_CURRENT_SOURCE_DIR}/modules/native/feathers/include"
)

# for install(TARGETS .. ${FALCON_INSTALL_DESTINATIONS})
set(FALCON_INSTALL_DESTINATIONS
  RUNTIME DESTINATION ${FALCON_BIN_DIR}
  LIBRARY DESTINATION ${FALCON_LIB_DIR}
  ARCHIVE DESTINATION ${FALCON_LIB_DIR}
)

set(CMAKE_RUNTIME_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/${FALCON_BIN_DIR}" CACHE INTERNAL 
  "Where to put the executables"
)
set(CMAKE_LIBRARY_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/${FALCON_LIB_DIR}" 
  CACHE INTERNAL "Where to put the libraries"
)
set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/${FALCON_LIB_DIR}" CACHE INTERNAL 
  "Where to put the archives"
)

include_directories( include )

#########################################################
# Things to do at main level
#

# Set of OSI/GNU-compliant documentation
include( cmake/install-gnudocs.cmake )


#########################################################
# Subdirectories
#

#collect the include files in FALCON_HEADER
add_subdirectory(include)
add_subdirectory(engine)
add_subdirectory(clt)

add_subdirectory(modules)
add_subdirectory( apps )
add_subdirectory( docs )
add_subdirectory( tests/bin )
add_subdirectory( dist )


#add_subdirectory(devtools)
#add_custom_target(falcon-core)


