load gtk

GC.enable( false )

_main = GtkMain()


class MyButton( num, parent ) from GtkButton
    _num = num
    _parent = parent
    init
        self.set_label( @ "$num" )
        self.signal_clicked().connect( self )
    end
    function on_clicked()
        self._parent.remove( self )
        GC.perform()
    end
end

class MyWindow from GtkWindow
    init
        self.signal_delete_event().connect( self )
        //
        hbox = GtkHBox()
        self.add( hbox )
        //
        btn1 = MyButton( 0, hbox )
        hbox.pack_start_defaults( btn1 )
        //
        btn2 = MyButton( 1, hbox )
        hbox.pack_start_defaults( btn2 )
        //
        btn3 = MyButton( 2, hbox )
        hbox.pack_start_defaults( btn3 )
        //
    end
    function on_delete_event()
        _main.quit()
        return false
    end
end

w = MyWindow()

GC.perform()

_main.run( w )
