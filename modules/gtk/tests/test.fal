load gtk
GC.enable(false)
_main = GtkMain()

class MyLabel from GtkLabel( "Off" )
    function on_clicked()
        if self.get_text() == "Off"
            self.set_text( "On" )
        else
            self.set_text( "Off" )
        end
    end
end

class MyWindow from GtkWindow

    lbl = MyLabel()
    btn = GtkButton( "Switch" )

    init
        self.signal_delete_event().connect( self )
        self.btn.signal_clicked().connect( self.lbl )
        vbox = GtkVBox()
        vbox.add( self.btn )
        vbox.add( self.lbl )
        self.add( vbox )
        GC.perform()
    end

    function on_delete_event()
        _main.quit()
        return false
    end
end

_main.run( MyWindow() )

