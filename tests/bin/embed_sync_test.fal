// Test for embed_sync 
// -- load this script if you have nothing else handy.

function sub1()
	> "This is sub1"
end

function sub2()
	> "This is sub2 ..."
	sleep(0.5)
	> "And again ..."
	sleep(0.5)
	> "And again ..."
	sleep(0.5)
	> "And done!"
end

function sub3()
	> "This is sub3"
end

function raiseItem()
	> "raising an item..."
	raise "Hello world, I am a raised item!"
end

function genError()
	^[ .[ 
		"I am going to cause an error here in 3..." 
		"... 2..."
		"... 1..."
		] ] {x=> > x; sleep(1)}
		
	> "Now!"
	
	x = [1, 2, 3]
	> x[4]
end

// You can execute this code invoking __main__ in embed_sync
> "Hello from the main function."
> "This is the main code."

sub1()
sub2()
sub3()

> "Done."
return 1

