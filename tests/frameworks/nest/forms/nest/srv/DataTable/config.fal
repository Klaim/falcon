// Configuration for FORM test -- data table service

import from nest.action in na
import from nest.dbview in dw
import DBView from nest.dbview as DBView

users = Nest.dm( "form_db" ).entity( "users" )

view = DBView( users )
view.fields = .[
   dw.DBViewField( "user_id", i"User id", nil, dw.DBOrder.ASCENDING )
   dw.DBViewField( "first_name", i"First name", {v=>htmlEscape(v)} )
   dw.DBViewField( "last_name", i"Last name", {v=>htmlEscape(v)} )
]

back_act = .[
   na.ActionBox( na.LinkAction( "Edit", Nest.AL.STAFF, Nest.pageLink("edit", ["edit.eid"=> ^+"$(eid)"]), "Edit" ), "&nbsp;", "&nbsp;" )
]

front_act = .[
   na.CheckboxAction( "Delete?", Nest.AL.STAFF )
]

table_act = .[
   na.SubmitAction( "Delete", Nest.AL.STAFF, "Delete!", "cmd", "del" )
   na.ButtonAction( "Add", Nest.AL.STAFF, "Add new!", "window.location='" + Nest.pageLink("add")+"'" )
]

handler = Nest.pageLink("home", ["cnf"=>1])
default_cnt = 10
   