/*
   FALCON - The Falcon Programming Language

   Nest - Falcon web applcation engine

   FILE: wiki_db.fal

   Test - Configuration for the datamanager of the wiki test site.
   -------------------------------------------------------------------
   Author: Giancarlo Niccolai
   Begin: Sun, 22 Aug 2010 12:37:43 +0200

   -------------------------------------------------------------------
   (C) Copyright 2010: the FALCON developers (see list in AUTHORS file)

   See LICENSE file for licensing details.
*/

import from nest.dbentity in dbe
import from hash

if vmSystemType() == "WIN"
   connectString = "sqlite3:db=C:\\Temp\\wiki.db"
else
   connectString = "sqlite3:db=/tmp/wiki.db"
end

// The wiki entity is generated by the wiki service

users = dbe.DBEntity( "users",
   .[
   "user_id varchar(15) PRIMARY KEY"
   "pwd_md5 char(32)"
   "auth_type char(10)"
   ]
   )

users.startup = function()
   return [
      ["user_id" => "admin", "pwd_md5" => hash.md5("admin"), "auth_type" => "admin"],
      ["user_id" => "staff", "pwd_md5" => hash.md5("staff"), "auth_type" => "staff"],
      ["user_id" => "user", "pwd_md5" => hash.md5("user"), "auth_type" => "user"]
   ]
end
