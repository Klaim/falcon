/*
   FALCON - The Falcon Programming Language

   Nest - Falcon web applcation engine

   FILE: config.fal

   Test - Configuration for the wiki service.
   -------------------------------------------------------------------
   Author: Giancarlo Niccolai
   Begin: Sun, 22 Aug 2010 12:37:43 +0200

   -------------------------------------------------------------------
   (C) Copyright 2010: the FALCON developers (see list in AUTHORS file)

   See LICENSE file for licensing details.
*/

import from parser.creole
import from nest.action in na


dm = Nest.dm("wiki_db")
parser = parser.creole.Parser()
upload_dir = "uploads"
upload_linker = { v => upload_dir+"/" + URI.encode(v) }
history_depth = 10

actions = .[
   na.ButtonAction( "Insert image", Nest.AL.NONE, i"Insert image", "javascript:openUploads('image')" )
   na.ButtonAction( "Insert file", Nest.AL.NONE, i"Insert file", "javascript:openUploads('file')" )
]   

pupload = Nest.pageLink("uploads")
Nest.scripts += @'
   function openUploads(mode) {
       window.open("$pupload&mode=" + mode,
         "Upload test","width=800,height=600,location=no,menubar=no,toolbar=no,scrollbars=yes");
   }
'