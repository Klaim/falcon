<?
   dm = Nest.dm( "wiki_db" )
   wiki = Nest.service("Wiki")

   function showNavi()
      page = wiki.getPage( "special:navi" )
      if page == nil
         return "Edit the navigation page(<a href=\""+wiki.linkEditPage("special:navi")+"\">special:navi</a> to fill this area"
      else
         return page.content_html
      end
   end
?>
<html>
<head>
   <title>Nest wiki system test.</title>
   <? Nest.headings() ?>
</head>
<body>
<h1>Wiki system test</h1>
<p>This page shows a complete example of a simlple wiki system.</p>
<table border="1" width="100%">
<tr>
   <td width="80%" style="padding:5pt; vertical-align:top"><? wiki.render() ?></td>
   <td width="20%" style="padding:5pt; padding-top:10pt; vertical-align:top"><?= showNavi() ?></td>
</tr>
</table>
<p>Menu to control your entries:</p>
<form action="<?= Nest.pageLink() ?>" method="POST" accept-charset="utf-8">
<ul>
<li><a href="/">Return to main</a></li>
<li><a href="<?= wiki.linkDelete() ?>">Delete this page</a></li>
<li><a href="<?= wiki.linkMody() ?>">Edit this page</a></li>
<li><a href="<?= wiki.linkMody("special:navi") ?>">Edit the navigation page</a></li>
<li>Go to this page: <input type="text" name="wid" size="30" maxlength="40"/><button type="submit"/>Go!</button>
</li>
</ul>
</form>

</body>
</html>
