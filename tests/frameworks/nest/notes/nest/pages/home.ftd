<?
   import from nest.action in na
   
   dm = Nest.dm( "notes_db" )

   login = Nest.service("Login")
   da = Nest.service( "DataControl" )        
   dq = Nest.service( "DataTable", "",
      [
         "back_act" => .[
            na.ActionBox( na.LinkAction( Nest.AL.USER, "View", Nest.eidLink("view") ), "&nbsp;", "&nbsp;" )
            na.ActionBox( na.LinkAction( Nest.AL.STAFF, "Edit", Nest.eidLink("edit") ), "&nbsp;", "&nbsp;" )
         ],
         "front_act" => na.CheckboxAction( Nest.AL.STAFF ),
         "table_act" => .[
            na.SubmitAction( Nest.AL.STAFF, "Delete!", "cmd", "del" )
            na.ButtonAction( Nest.AL.STAFF, "Add new!", "window.location='" + Nest.pageLink("add")+"'" )
         ],
         "handler" => Nest.pageLink(),
         "level" => Nest.AL.USER
      ] )
      
   da.dm = dm
   //dq.entity = da.entity = "notes"
   dq.view = "table"
   
?><html>
<head>
   <title>Your notes</title>
   <?= Nest.headings() ?>
</head>
<body>
   <h1>Your notes</h1>
   <div id="login"><? login.render() ?></div>
   <p><? da.render() ?></p>
   <p>This is a simple test site showing how you could create an on-line notepad.</p>
   <p><?= na.Action(Nest.AL.STAFF, "Use this link to create a <a href=\"" + Nest.pageLink('add') +"\">new note</a>.").render() ?>
   <? dq.render() ?>
</body>
</html>
