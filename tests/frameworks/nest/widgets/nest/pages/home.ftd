<?
   import from nest.js
   import from nest.ajax
   Reply.setCookie( "test", "Test value" )
?>
<h1>Hello world!</h1>
<p>JS button utility function test: <? nest.js.button( "Button", "say_hi()" ) ?>.</p>
<?
   // JS Script facility test.
   nest.js.script( "
         function say_hi() {
               alert('saying hi!');
         }" )
?>
<hr>
<p>Ajax basic function test: <? nest.js.button( "Button", "Nest.ajax('hello', {}, onHello)" ) ?>.</p>
<?
   // JS Script facility test.
   nest.js.script( "
         function onHello( obj ) {
               alert('Received ajax hello: ' + obj.text );
         }" )
?>
<p>Checking for cookie persistency via ajax: <? nest.js.button( "Button", "Nest.ajax('hello', {}, getCookie)" ) ?>.</p>
<?
   // JS Script facility test.
   nest.js.script( "
         function getCookie( obj ) {
               alert('Cookie data via ajax was: ' + obj.Cookie );
         }" )
?>

<hr>
<p>Nest AJAX enabled widget test.</p>
<?= Nest.widget( "HashMaker" )("hm").render() ?>

<hr>

<p>Basic widgets with local page messaging: Type some text and see the count change.</p>
<?
   wid = Nest.widget( "ActiveTextArea" )("enter_text", "Enter text", 3, 30)

   widtext = Nest.widget("Text")("counter","0")
   widtext.addStyle( "color:red; font-weight:bold" )
   widtext.jsListeners = [
      wid => " function( source, msg, value ) { this.innerHTML = value.length; }"
      ]
?>
<p><?= wid.render() ?></p>
<p>Lenght of the text: <?=widtext.render() ?></p>

<hr>
<p>Advanced widgets with local page messaging</p>
<?= Nest.widget( "RichPassword" )("my_password", "Enter password", "Repeat password").render() ?>
<hr>
<p>Avanced widget with AJAX and local messaging.</p>
<p>Names taken on the server are: <?
   namewid = Nest.widget( "TheNameIsAvail" )()
   > ", ".merge( namewid.takenNames )
?>
</p>
<p>Please, notice that the names must be at least <?= namewid.minSize ?> characters long.</p>
<p><?= namewid.render() ?></p>

<p><i>Tests complete -- for now</i></p>
