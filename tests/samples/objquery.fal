load dbi
load sample_db

class Person
	name = nil
   dob = nil
end

d = connect()
createNamesTable(d)

> "Query by fetching an object"

nameFilter = "%"
if len( args ) > 0: nameFilter = args[0]

r = d.query( "SELECT name,dob FROM names WHERE name LIKE :1 ORDER BY dob", nameFilter )
while (n = r.fetchObject( Person() ) )
	> n.name, " was born on ", n.dob
end
r.close()

dropNamesTable(d)

d.close()
