load shmem


mem = args.len == 0 ? SharedMem("test") : SharedMem.create("test")
data = mem.grab()
id = data.len
> "Press enter to terminate"
> "This will be client with ID ", id
data += "A"
mem.write(data)

sel = Selector()
// add the stream for read
sel.addRead( VMProcess.current().stdIn() )

count = 1

while not sel.wait(500)
   >> @"$({mem.size}:r4): ",data, "< \r"   
   mem.read(data)
   data[id] = "A"/count
   if ++count == 26
      count = 0
   end
   mem.write(data)
end

if args.len != 0
   mem.close(true)
end

> "Done"
