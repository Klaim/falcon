load dbi
load sample_db

d = connect()
createNamesTable(d)

> "Simple query"

nameFilter = "%"
if len( args ) > 0: nameFilter = args[0]

r = d.query( "SELECT name,dob FROM names WHERE name LIKE :1 ORDER BY dob", nameFilter )
while r.next() == 0
	name = r.asString( 0 )
   dob = r.asDate( 1 )
	> name, " was born on ", dob
end
r.close()

// Again, but this time using pre-built items
> "Simple query again, but using pre-built items."
dob = TimeStamp()
name = ""
r = d.query( "SELECT name,dob FROM names WHERE name LIKE :1 ORDER BY dob", nameFilter )
while r.next() == 0
   r.asString( 0, name )
   r.asDate( 1, dob )
   > name, " was born on ", dob
end
r.close()

dropNamesTable(d)

d.close()
