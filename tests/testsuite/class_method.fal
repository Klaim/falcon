/****************************************************************************
* Falcon test suite
*
* ID: 28i
* Category: classes
* Subcategory: subclasses
* Short: Class Method Coherence
* Description:
*   In this test, we check for correct assignment and usage of
*   "class methods". Class methods are pair of objects and inner
*   class. They are generated by asking for a subclass property in
*   an object, and once dereferenced, they must create a method using
*   the base class function and the original object. Also, calling
*   a class method must act as calling the base class itself (i.e.
*   creating an instance of the base class).
*   Finally, the test also checks for the "." operator not to create
*   a class method for a property not being a base class for the given
*   object.
* [/Description]
*
****************************************************************************/

class A
   function test(): return "A"
end

class B from A
   prop = nil
   function test(): return "B"
end

b = B()
if b.A.typeId() != ClassMethodType: failure( "type id")
if b.test() != "B": failure( "derived method")
if b.A.test() != "A": failure( "base method")
c = b.A()
if c.baseClass() != A: failure( "base class instance" )

b.prop = TimeStamp
if b.prop.typeId() != ClassType: failure( "Isomorphism of non bases" )

success()
