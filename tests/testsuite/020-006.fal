/*
@name Generator class (2)
@category Core-module

@output
Generator class used in while
a
b
c
d
e
Done
@endoutput
*/

> "Generator class used in while"

x = VMContext
dd = x.dataDepth

function func( data, gen )   
   value = data[gen.iterator++]
   if gen.iterator == data.len 
      return value         
   else
      return? value
   end
end
   
gen = Generator( func, .['a' 'b' 'c' 'd' 'e'], 0 )

while gen.hasNext
   > gen.next
end

dd1 = x.dataDepth
if dd != dd1
   > "Failed on data depth: ", dd, " vs ", x.dataDepth
end

> "Done"
