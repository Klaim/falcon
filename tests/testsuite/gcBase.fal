/****************************************************************************
* Falcon test suite
*
* ID: 51a
* Category: gc
* Subcategory:
* Short: Garbage collection - basic
* Description:
*  Test for correct accounting of garbage collection when no items are
*  involved.
* [/Description]
*
****************************************************************************/

// Record initial memory requirements

base_allocMem = 0
base_allocItems = 0

// First gc loop (empty)
allocItems = 0
allocMem = 0
liveItems = 0
liveMem = 0
// reference causes GC data to change, so let's get them here.
gcGetParams( $allocMem, $allocItems, $liveMem, $liveItems )
gcGetParams( $base_allocMem, $base_allocItems )

//printl( "base am = ", base_allocMem, " ai = ", base_allocItems )

// perform
gcPerform( true )
gcGetParams( $allocMem, $allocItems, $liveMem, $liveItems )
//printl( "1: am = ", allocMem, " ai = ", allocItems, " lm = ", liveMem, " li = ", liveItems )

if base_allocMem != allocMem: failure( "empty - unmatching allocated memory" )
if base_allocItems != allocItems: failure( "empty - unmatching allocated items" )
if allocMem != liveMem: failure( "empty - live memory unmatching allocated memory" )
if allocItems != liveItems: failure( "empty - live items umatching allocated items" )

success()

/* End of file */
