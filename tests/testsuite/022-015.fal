/*
@name Array methods - scan
@category Core-array

@output
Array methods - scan
Test as a method:
[], {(x)   ( x == 0 )}: -1
["a", "b", "c"], {(x)   ( x == 0 )}: -1
[1, "b", 0, "c"], {(x)   ( x == 0 )}: 3
[1, "b", 2, "c"], {(x)   ( x == "c" )}: 4
Test as a static function:
[], {(x)   ( x == 0 )}: -1
["a", "b", "c"], {(x)   ( x == 0 )}: -1
[1, "b", 0, "c"], {(x)   ( x == 0 )}: 3
[1, "b", 2, "c"], {(x)   ( x == "c" )}: 4
Done
@endoutput
*/

> "Array methods - scan"

tests = .[ 
   .[ .[] {(x) x == 0} ]
   .[ .['a' 'b' 'c' ] {(x) x == 0} ]
   
   .[ .[1 'b' 0 'c' ] {(x) x == 0} ]
   .[ .[1 'b' 2 'c' ] {(x) x == 'c'} ]
]

function test( code, x )
   >> ", ".merge(^[x] {(v) ^+ v.render().replace("\n","") } =>[]), ": "
   > code(x)
end

> "Test as a method:"
^[ tests ] .[test {(x) x.len > 1 ? call(x[0].scan, x[1:]) : call(x[0].scan ) }]

> "Test as a static function:"
^[ tests ] .[test {(x) call( Array.scan, x) }]


> "Done"
